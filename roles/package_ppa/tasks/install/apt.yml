---
- name: "add '{{ repo }}' repository"
  apt_repository: >
    repo="{{ repo }}"
    state=present
    update_cache=yes

- name: "install '{{ name }}' pre-packages"
  apt: >
    pkg="{{ item }}"
    state=present
  with_items: "{{ pre }}"

- name: "install '{{ name }}' package"
  apt: >
    pkg="{{ name }}"
    state=present

- name: "install '{{ name }}' post-packages"
  apt: >
    pkg="{{ item }}"
    state=present
  with_items: "{{ post }}"
